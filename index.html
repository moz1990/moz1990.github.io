<!DOCTYPE html>
<html>
<head>
<script>
function launchEnrollmentLink() {
    var enrollmentToken = new URL(window.location.href).searchParams.get('et');
    if (enrollmentToken != null) {
        enrollmentLink = 'https://enterprise.google.com/android/enroll?et=' + enrollmentToken;
    } else {
        enrollmentLink = 'https://enterprise.google.com/android/enroll?invalid';
    }
    window.open(enrollmentLink, '_self');
}

async function launchEnrollmentLinkWithDelay() {
    var delay = new URL(window.location.href).searchParams.get('delay');
    if (delay != null) {
        await sleep(delay);
    }
    var enrollmentToken = new URL(window.location.href).searchParams.get('et');
    if (enrollmentToken != null) {
        enrollmentLink = 'https://enterprise.google.com/android/enroll?et=' + enrollmentToken;
    } else {
        enrollmentLink = 'https://enterprise.google.com/android/enroll?invalid';
    }
    window.open(enrollmentLink, '_self');
}

async function launchPlayEnrollmentLink() {
    var delay = new URL(window.location.href).searchParams.get('delay');
    if (delay != null) {
        await sleep(delay);
    }
    var enrollmentToken = new URL(window.location.href).searchParams.get('et');
    if (enrollmentToken != null) {
        enrollmentLink = 'https://play.google.com/managed/enroll?et=' + enrollmentToken;
    } else {
        enrollmentLink = 'https://play.google.com/managed/enroll/invalid';
    }
    window.open(enrollmentLink, '_self');
}

function sleep(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}
</script>
</head>
<body>
<h1>
<p><button onclick="launchEnrollmentLink()">launchEnrollmentLink</button></p>
<p><button onclick="launchEnrollmentLinkWithDelay()">launchEnrollmentLinkWithDelay</button></p>
<p><button onclick="launchPlayEnrollmentLink()">launchPlayEnrollmentLink</button></p>
</h1>
</body>
</html>
